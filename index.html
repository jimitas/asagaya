<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã²ã‚‰ã‚„ã™ã¿ è–åœ°å·¡ç¤¼ãƒãƒƒãƒ— - é˜¿ä½ãƒ¶è°·</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&family=Shippori+Mincho:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --warm-cream: #FDF8F3;
            --soft-brown: #8B7355;
            --deep-brown: #5C4033;
            --accent-orange: #E8A87C;
            --accent-green: #7CB87C;
            --light-green: #C5E0B4;
            --shadow: rgba(92, 64, 51, 0.15);
            --card-bg: rgba(253, 248, 243, 0.95);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background: var(--warm-cream);
            color: var(--deep-brown);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--soft-brown) 0%, var(--deep-brown) 100%);
            padding: 1.5rem 2rem;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5 L35 15 L30 25 L25 15 Z' fill='%23ffffff' fill-opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .house-icon {
            width: 60px;
            height: 60px;
            background: var(--accent-orange);
            border-radius: 8px 8px 0 0;
            position: relative;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .house-icon::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 35px solid transparent;
            border-right: 35px solid transparent;
            border-bottom: 25px solid var(--accent-orange);
        }

        .house-icon::after {
            content: '';
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 18px;
            height: 25px;
            background: var(--deep-brown);
            border-radius: 3px 3px 0 0;
        }

        h1 {
            font-family: 'Shippori Mincho', serif;
            font-size: 2rem;
            color: var(--warm-cream);
            font-weight: 600;
            letter-spacing: 0.1em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        h1 span {
            display: block;
            font-size: 0.9rem;
            font-family: 'Zen Maru Gothic', sans-serif;
            font-weight: 400;
            letter-spacing: 0.2em;
            margin-top: 0.3rem;
            opacity: 0.9;
        }

        /* Main Layout */
        main {
            display: grid;
            grid-template-columns: 1fr 380px;
            height: calc(100vh - 100px);
            max-width: 1400px;
            margin: 0 auto;
            gap: 0;
        }

        /* Map Container */
        .map-container {
            position: relative;
            background: #e8e0d5;
        }

        #map {
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .leaflet-popup-content-wrapper {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 8px 30px var(--shadow);
            border: 2px solid var(--accent-orange);
        }

        .leaflet-popup-content {
            margin: 12px 16px;
            font-family: 'Zen Maru Gothic', sans-serif;
        }

        .leaflet-popup-tip {
            background: var(--card-bg);
            border: 2px solid var(--accent-orange);
            border-top: none;
            border-left: none;
        }

        /* Sidebar */
        .sidebar {
            background: linear-gradient(180deg, var(--warm-cream) 0%, #F5EDE3 100%);
            border-left: 3px solid var(--accent-orange);
            overflow-y: auto;
            padding: 1.5rem;
        }

        .sidebar-title {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.3rem;
            color: var(--deep-brown);
            margin-bottom: 1rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px dashed var(--accent-orange);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar-title::before {
            content: 'ğŸ“';
            font-size: 1.2rem;
        }

        /* Spot Cards */
        .spot-card {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 3px 15px var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .spot-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, transparent 50%, var(--light-green) 50%);
            opacity: 0.3;
            transition: opacity 0.3s ease;
        }

        .spot-card:hover {
            transform: translateX(-5px);
            box-shadow: 0 6px 25px var(--shadow);
            border-left-color: var(--accent-orange);
        }

        .spot-card:hover::before {
            opacity: 0.5;
        }

        .spot-card.active {
            border-left-color: var(--accent-green);
            background: linear-gradient(135deg, white 0%, var(--light-green) 100%);
        }

        .spot-number {
            position: absolute;
            top: 0.8rem;
            right: 0.8rem;
            width: 28px;
            height: 28px;
            background: var(--accent-orange);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            z-index: 1;
        }

        .spot-name {
            font-family: 'Shippori Mincho', serif;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--deep-brown);
            margin-bottom: 0.4rem;
            padding-right: 2rem;
        }

        .spot-category {
            display: inline-block;
            font-size: 0.7rem;
            background: var(--accent-green);
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            margin-bottom: 0.5rem;
        }

        .spot-description {
            font-size: 0.85rem;
            color: var(--soft-brown);
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        .spot-address {
            font-size: 0.75rem;
            color: #999;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .spot-address::before {
            content: 'ğŸ“®';
            font-size: 0.7rem;
        }

        /* Legend */
        .legend {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            box-shadow: 0 3px 15px var(--shadow);
        }

        .legend-title {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
            color: var(--deep-brown);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            margin-bottom: 0.4rem;
        }

        .legend-marker {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .legend-marker.main { background: #E74C3C; }
        .legend-marker.food { background: #F39C12; }
        .legend-marker.shop { background: #3498DB; }
        .legend-marker.spot { background: #27AE60; }

        /* Route Button */
        .route-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--accent-orange) 0%, #D4936A 100%);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 12px;
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(232, 168, 124, 0.4);
        }

        .route-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(232, 168, 124, 0.5);
        }

        .route-btn::before {
            content: 'ğŸš¶ ';
        }

        /* Custom Marker */
        .custom-marker {
            background: white;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            border: 3px solid var(--accent-orange);
            transition: transform 0.2s ease;
        }

        .custom-marker:hover {
            transform: scale(1.2);
        }

        /* Info Panel */
        .info-panel {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 3px 15px var(--shadow);
            border: 2px dashed var(--light-green);
        }

        .info-panel p {
            font-size: 0.85rem;
            line-height: 1.7;
            color: var(--soft-brown);
        }

        .info-panel strong {
            color: var(--deep-brown);
        }

        /* Responsive */
        @media (max-width: 900px) {
            main {
                grid-template-columns: 1fr;
                grid-template-rows: 50vh auto;
                height: auto;
            }

            .sidebar {
                border-left: none;
                border-top: 3px solid var(--accent-orange);
            }

            h1 {
                font-size: 1.5rem;
            }
        }

        /* Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .spot-card {
            animation: fadeInUp 0.5s ease forwards;
        }

        .spot-card:nth-child(1) { animation-delay: 0.1s; }
        .spot-card:nth-child(2) { animation-delay: 0.15s; }
        .spot-card:nth-child(3) { animation-delay: 0.2s; }
        .spot-card:nth-child(4) { animation-delay: 0.25s; }
        .spot-card:nth-child(5) { animation-delay: 0.3s; }
        .spot-card:nth-child(6) { animation-delay: 0.35s; }
        .spot-card:nth-child(7) { animation-delay: 0.4s; }
        .spot-card:nth-child(8) { animation-delay: 0.45s; }
        .spot-card:nth-child(9) { animation-delay: 0.5s; }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="house-icon"></div>
            <h1>
                ã²ã‚‰ã‚„ã™ã¿ è–åœ°å·¡ç¤¼ãƒãƒƒãƒ—
                <span>é˜¿ä½ãƒ¶è°·å‘¨è¾ºãƒ­ã‚±åœ°ã‚¬ã‚¤ãƒ‰</span>
            </h1>
        </div>
    </header>

    <main>
        <div class="map-container">
            <div id="map"></div>
        </div>

        <aside class="sidebar">
            <div class="info-panel">
                <p>
                    <strong>ã€ã²ã‚‰ã‚„ã™ã¿ã€</strong>ã¯çœŸé€ åœ­ä¼ã•ã‚“ã«ã‚ˆã‚‹æ¼«ç”»ä½œå“ã€‚
                    29æ­³ãƒ•ãƒªãƒ¼ã‚¿ãƒ¼ã®ãƒ’ãƒ­ãƒˆãŒé˜¿ä½ãƒ¶è°·ã®å¹³å±‹ã§å¾“å¦¹ã®ãªã¤ã¿ã¨æš®ã‚‰ã™æ—¥å¸¸ã‚’æãã¾ã™ã€‚
                    2025å¹´ã«NHKå¤œãƒ‰ãƒ©ã¨ã—ã¦ãƒ‰ãƒ©ãƒåŒ–ã•ã‚Œã¾ã—ãŸã€‚
                </p>
            </div>

            <h2 class="sidebar-title">è–åœ°ã‚¹ãƒãƒƒãƒˆä¸€è¦§</h2>

            <div id="spot-list"></div>

            <div class="legend">
                <div class="legend-title">ã‚«ãƒ†ã‚´ãƒªå‡¡ä¾‹</div>
                <div class="legend-item">
                    <div class="legend-marker main">ğŸ </div>
                    <span>ãƒ¡ã‚¤ãƒ³ã‚¹ãƒãƒƒãƒˆ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-marker food">ğŸ´</div>
                    <span>é£²é£Ÿåº—</span>
                </div>
                <div class="legend-item">
                    <div class="legend-marker shop">ğŸ“š</div>
                    <span>ãŠåº—ãƒ»æ–½è¨­</span>
                </div>
                <div class="legend-item">
                    <div class="legend-marker spot">ğŸ“</div>
                    <span>ãƒ­ã‚±åœ°</span>
                </div>
            </div>

            <button class="route-btn" onclick="openGoogleMapsRoute()">
                ãŠã™ã™ã‚ãƒ«ãƒ¼ãƒˆã‚’é–‹ã
            </button>
        </aside>
    </main>

    <script>
        // è–åœ°ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿
        const spots = [
            {
                id: 1,
                name: "JRé˜¿ä½ãƒ¶è°·é§…",
                category: "main",
                categoryName: "ãƒ¡ã‚¤ãƒ³ã‚¹ãƒãƒƒãƒˆ",
                icon: "ğŸš‰",
                lat: 35.7047,
                lng: 139.6357,
                description: "ç‰©èªã®ä¸­å¿ƒã¨ãªã‚‹é˜¿ä½ãƒ¶è°·é§…ã€‚ãƒ’ãƒ­ãƒˆã¨ãªã¤ã¿ãŒå¾…ã¡åˆã‚ã›ã‚’ã—ãŸãƒ­ãƒ¼ã‚¿ãƒªãƒ¼ãªã©ã€æ§˜ã€…ãªã‚·ãƒ¼ãƒ³ã§ç™»å ´ã—ã¾ã™ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·å—3-36-1"
            },
            {
                id: 2,
                name: "é‡£ã‚Šå € å¯¿ã€…æœ¨åœ’",
                category: "main",
                categoryName: "ãƒ¡ã‚¤ãƒ³ã‚¹ãƒãƒƒãƒˆ",
                icon: "ğŸ£",
                lat: 35.7022,
                lng: 139.6365,
                description: "ãƒ’ãƒ­ãƒˆã®ãƒã‚¤ãƒˆå…ˆã€Œé‡‘æ¾ã€ã®ãƒ¢ãƒ‡ãƒ«ã€‚å¤§æ­£12å¹´å‰µæ¥­ã®è€èˆ—é‡£ã‚Šå €ã§ã€é‡‘é­šã¨é¯‰é‡£ã‚ŠãŒæ¥½ã—ã‚ã¾ã™ã€‚é§…ã‹ã‚‰å¾’æ­©3åˆ†ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·å—3-38-33"
            },
            {
                id: 3,
                name: "ã‚ã„ãŸã“ ã„ã¡ã°ã‚“åº—",
                category: "food",
                categoryName: "é£²é£Ÿåº—",
                icon: "ğŸ™",
                lat: 35.7053,
                lng: 139.6363,
                description: "ãƒ’ãƒ­ãƒˆãŒãŸã“ç„¼ãã‚’è²·ã†ã‚·ãƒ¼ãƒ³ã§ç™»å ´ã€‚é˜¿ä½ãƒ¶è°·é§…åŒ—å£ã™ãã®ã‚¬ãƒ¼ãƒ‰ä¸‹ã«ã‚ã‚‹äººæ°—ãŸã“ç„¼ãåº—ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·åŒ—1-3-2"
            },
            {
                id: 4,
                name: "é˜¿ä½è°·ãƒ‘ãƒ¼ãƒ«ã‚»ãƒ³ã‚¿ãƒ¼",
                category: "spot",
                categoryName: "ãƒ­ã‚±åœ°",
                icon: "ğŸ®",
                lat: 35.7035,
                lng: 139.6355,
                description: "é˜¿ä½è°·ä¸ƒå¤•ã¾ã¤ã‚Šã®èˆå°ã¨ãªã‚‹ã‚¢ãƒ¼ã‚±ãƒ¼ãƒ‰å•†åº—è¡—ã€‚ç´„700mã®é€šã‚Šã«200ä»¥ä¸Šã®åº—èˆ—ãŒè»’ã‚’é€£ã­ã¾ã™ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·å—1ä¸ç›®"
            },
            {
                id: 5,
                name: "æ‰å±±å•†äº‹ï¼ˆãƒ‹ã‚³ãƒ‹ã‚³ä¸å‹•ç”£ï¼‰",
                category: "shop",
                categoryName: "ãŠåº—ãƒ»æ–½è¨­",
                icon: "ğŸ¢",
                lat: 35.7042,
                lng: 139.6352,
                description: "ã‚ˆã‚‚ãã•ã‚“ãŒåƒãã€Œãƒ‹ã‚³ãƒ‹ã‚³ä¸å‹•ç”£ã€ã®ãƒ­ã‚±åœ°ã€‚ãƒ‘ãƒ¼ãƒ«ã‚»ãƒ³ã‚¿ãƒ¼å…¥å£ã«ã‚ã‚‹å®Ÿåœ¨ã®ä¸å‹•ç”£ä¼šç¤¾ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·å—3ä¸ç›®"
            },
            {
                id: 6,
                name: "é˜¿ä½è°·åŒ—1ä¸ç›®æ­©é“æ©‹",
                category: "spot",
                categoryName: "ãƒ­ã‚±åœ°",
                icon: "ğŸŒ‰",
                lat: 35.7082,
                lng: 139.6357,
                description: "ãƒ’ãƒ­ãƒˆã¨ãªã¤ã¿ãŒè²·ã„ç‰©å¸°ã‚Šã«ç«‹ã¡å¯„ã‚‹æ­©é“æ©‹ã€‚ã€Œçœºã‚ã„ã„ã‚ˆã€ã¨èª˜ã†ã‚·ãƒ¼ãƒ³ãŒå°è±¡çš„ã€‚ä¸­æ‰é€šã‚Šæ²¿ã„ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·åŒ—1ä¸ç›®"
            },
            {
                id: 7,
                name: "ã‚«ãƒ•ã‚§ãƒ»ãƒ‰ãƒ»ã‚¦ã‚£ãƒ³ã‚°",
                category: "food",
                categoryName: "é£²é£Ÿåº—",
                icon: "â˜•",
                lat: 35.7043,
                lng: 139.6362,
                description: "ã‚ˆã‚‚ãã•ã‚“ã¨å°èª¬å®¶ãƒ»çŸ³å·ãŒä¼šè©±ã™ã‚‹ã‚·ãƒ¼ãƒ³ã®èˆå°ã€‚é§…å—å£ãƒ“ãƒ«2éšã«ã‚ã‚‹æ˜”ãªãŒã‚‰ã®ç´”å–«èŒ¶ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·å—3ä¸ç›®"
            },
            {
                id: 8,
                name: "å¤æ›¸ã‚³ãƒ³ã‚³å ‚",
                category: "shop",
                categoryName: "ãŠåº—ãƒ»æ–½è¨­",
                icon: "ğŸ“š",
                lat: 35.7078,
                lng: 139.6355,
                description: "ä½œä¸­ã«ä½•åº¦ã‚‚ç™»å ´ã™ã‚‹å¤æœ¬å±‹ã€‚æ¾å±±é€šã‚Šã«ã‚ã‚Šã€ç¾è¡“ãƒ»éŸ³æ¥½ãƒ»æ­´å²ã®æœ¬ãŒå……å®Ÿã—ã¦ã„ã¾ã™ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·åŒ—2ä¸ç›®"
            },
            {
                id: 9,
                name: "å¤©å¾³æ³‰ï¼ˆéŠ­æ¹¯ï¼‰",
                category: "shop",
                categoryName: "ãŠåº—ãƒ»æ–½è¨­",
                icon: "â™¨ï¸",
                lat: 35.7065,
                lng: 139.6340,
                description: "é˜¿ä½ãƒ¶è°·ã®æ¸©ã‹ã„é›°å›²æ°—ã‚’æ„Ÿã˜ã‚‰ã‚Œã‚‹éŠ­æ¹¯ã€‚å…¬å¼è–åœ°å·¡ç¤¼ãƒãƒƒãƒ—ã‚‚é…å¸ƒä¸­ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·åŒ—1-13-7"
            },
            {
                id: 10,
                name: "ã¨ã‚‰ã‚„æ¤¿å±±",
                category: "food",
                categoryName: "é£²é£Ÿåº—",
                icon: "ğŸ¡",
                lat: 35.7028,
                lng: 139.6355,
                description: "å¤§æ­£14å¹´å‰µæ¥­ã®è€èˆ—å’Œè“å­åº—ã€‚ä¸ƒå¤•ã¾ã¤ã‚Šã®ã‚·ãƒ¼ãƒ³ã§ãªã¤ã¿ã¨ã‚ã‹ã‚ŠãŒæ­©ãèƒŒæ™¯ã«ç™»å ´ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·å—1ä¸ç›®"
            },
            {
                id: 11,
                name: "å…«å¹¡ç…é¤…",
                category: "food",
                categoryName: "é£²é£Ÿåº—",
                icon: "ğŸ˜",
                lat: 35.7095,
                lng: 139.6355,
                description: "80å¹´ä»¥ä¸Šå–¶æ¥­ã‚’ç¶šã‘ã‚‹è€èˆ—ç…é¤…å±‹ã€‚ãªã¤ã¿ã¨ä¸­å³¶ã•ã‚“ãŒé€šã‚Šã‹ã‹ã‚‹ã‚·ãƒ¼ãƒ³ã§ç™»å ´ã€‚",
                address: "æ±äº¬éƒ½æ‰ä¸¦åŒºé˜¿ä½è°·åŒ—3ä¸ç›®"
            }
        ];

        // ãƒãƒƒãƒ—åˆæœŸåŒ–
        const map = L.map('map').setView([35.7047, 139.6357], 16);

        // OpenStreetMapã‚¿ã‚¤ãƒ«
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        // ãƒãƒ¼ã‚«ãƒ¼ã‚’æ ¼ç´
        const markers = {};

        // ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®è‰²
        const categoryColors = {
            main: '#E74C3C',
            food: '#F39C12',
            shop: '#3498DB',
            spot: '#27AE60'
        };

        // ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ä½œæˆ
        function createCustomIcon(spot) {
            return L.divIcon({
                className: 'custom-marker-wrapper',
                html: `<div class="custom-marker" style="border-color: ${categoryColors[spot.category]}">${spot.icon}</div>`,
                iconSize: [36, 36],
                iconAnchor: [18, 18],
                popupAnchor: [0, -20]
            });
        }

        // ãƒãƒ¼ã‚«ãƒ¼è¿½åŠ 
        spots.forEach(spot => {
            const marker = L.marker([spot.lat, spot.lng], {
                icon: createCustomIcon(spot)
            }).addTo(map);

            marker.bindPopup(`
                <div style="min-width: 200px;">
                    <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">${spot.icon}</div>
                    <div style="font-family: 'Shippori Mincho', serif; font-size: 1.1rem; font-weight: 600; color: #5C4033; margin-bottom: 0.3rem;">${spot.name}</div>
                    <div style="font-size: 0.7rem; background: ${categoryColors[spot.category]}; color: white; display: inline-block; padding: 0.15rem 0.5rem; border-radius: 10px; margin-bottom: 0.5rem;">${spot.categoryName}</div>
                    <div style="font-size: 0.85rem; color: #8B7355; line-height: 1.5;">${spot.description}</div>
                </div>
            `);

            markers[spot.id] = marker;
        });

        // ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã‚¹ãƒãƒƒãƒˆã‚«ãƒ¼ãƒ‰è¿½åŠ 
        const spotList = document.getElementById('spot-list');
        spots.forEach(spot => {
            const card = document.createElement('div');
            card.className = 'spot-card';
            card.innerHTML = `
                <span class="spot-number">${spot.id}</span>
                <div class="spot-category" style="background: ${categoryColors[spot.category]}">${spot.categoryName}</div>
                <div class="spot-name">${spot.icon} ${spot.name}</div>
                <div class="spot-description">${spot.description}</div>
                <div class="spot-address">${spot.address}</div>
            `;

            card.addEventListener('click', () => {
                // ãƒãƒƒãƒ—ã‚’ç§»å‹•
                map.setView([spot.lat, spot.lng], 17);
                markers[spot.id].openPopup();

                // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
                document.querySelectorAll('.spot-card').forEach(c => c.classList.remove('active'));
                card.classList.add('active');
            });

            spotList.appendChild(card);
        });

        // Googleãƒãƒƒãƒ—ã§ãƒ«ãƒ¼ãƒˆã‚’é–‹ã
        function openGoogleMapsRoute() {
            const waypoints = spots.slice(0, 5).map(s => `${s.lat},${s.lng}`).join('/');
            const url = `https://www.google.com/maps/dir/${waypoints}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>